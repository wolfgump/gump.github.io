---
layout: post
title: "部署架构演进"
subtitle: ''
comments: false
author: "Gump"
header-style: text
date: 2020-3-20 20:30:21 +0800
tags:
    - 架构 
---

## 部署演进

- 单机时代

  浏览器--->域名----->tomcat

  缺点：非高可用，tomcat挂了整个应用挂掉

- DNS轮询

  浏览器--->域名--->dns server一个域名解析多个ip----->多个tomcat

  缺点：非高可用，dns server只负责解析ip，不负责这个ip对应的服务是否可用；dns解析有个生效周期；暴露太多外网ip

- nginx

  浏览器--->域名----->NGINX----->多个tomcat

  缺点：nginx单点故障

- keepalived

  浏览器----->域名----->keepalived(虚拟IP 一个ip对应多个nginx)----->多个tomcat

  缺点：keepalived保证了高可用，当一个nginx挂了会把请求转移到另外一台；但是正常情况只有一台nginx在用，请求量过大仍存在单点问题；

- lvs/F5

  浏览器----->域名----->keepalived(lvs/f5)---->多个nginx---->多个tomcat

  缺点：lvs/F5性能比nginx好很多，但是仍存在lvs/F5超过请求量时抗不住

  每天可以抗80亿的流量

- dns 轮询

  域名对应多个IP，分别对应不同的F5
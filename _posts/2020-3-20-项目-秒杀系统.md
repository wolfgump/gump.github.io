# 秒杀系统

## 调优

减少抢购中操作数据库的次数，缩短抢购流程，是抢购系统设计和优化的核心点

- 商品详情页面；CDN缓存

- 抢购倒计时；初始化时间从客户端获取，每隔一段时间主动去服务端刷新同步一次倒计时

- 获取购买资格；

  增加购买资格的环节，选择让超过库存的用户量进来提交订单页面，这样就可以保证有足够提交订单的用户量，确保抢购活动中商品的销量最大化。获取购买资格这步的并发量会非常大，还是基于分布式的，通常我们可以通过 Redis 分布式锁来控制购买资格的发放

- 提交订单

  需要先校验库存，库存足够时，用户先扣除缓存中的库存，再生成订单

- 限流

- 流量削峰

  新增一个等待队列，减缓抢购出现的集中式请求，相当于一个流量削峰

  

  
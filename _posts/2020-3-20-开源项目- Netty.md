---
layout: post
title: "Netty"
subtitle: ''
comments: false
author: "Gump"
header-style: text
date: 2020-3-20 20:30:21 +0800
tags:
    - 开源项目 
    - 中间件
    - 笔记
---

# Netty

## Why netty?

如果没有netty，我们怎么办

- 很久之前  java.net + java.io
- 现代  java.nio
- 其它类似框架 mina，Grizzly

## 为什么用Netty不用NIO

- 做的更多
  - 支持常用应用层协议
  - 解决传输问题：粘包、半包
  - 支持流量整形
  - 完善的断连，Idl等异常处理
  - API更友好
  - 功能增强，如FastThreadLocal
- 做的更好
  - 规避了JDK NIO的bug;如epoll bug、IP_TOS参数使用时抛异常

## 为什么不适用其他类似框架

- Mina 和netty同作者，Mina归属Apache,作者建议使用Netty;
- Grizzly,sun公司，更新少
- Tomcat Jetty, 通讯层没有单独拆分出来；（Tomcat Jetty 为什么底层不用Netty呢？Tomcat更先出来，那时候还没有Netty）

## Netty 关键词

NIO、 Asynchronous、event-driven

## 使用场景

- 构建高性能、低时延的各种 Java 中间件，例如 MQ、分布式服务框架、ESB 消息总线等，Netty 主要作为基础通信框架提供高性能、低时延的通信服务；
- 公有或者私有协议栈的基础通信框架，例如可以基于 Netty 构建异步、高性能的 WebSocket 协议栈；
- 各领域应用，例如大数据、游戏等，Netty 作为高性能的通信框架用于内部各模块的数据分发、传输和汇总等，实现模块之间高性能通信。

## 版本

最小版本4.1，废弃了5.0（用了新版本JDK更多新特性ForkJoinPool，代码复杂但性能比4.1没有明细提升）

## 三种IO模式

- BIO已过时
- NIO 推荐使用
- AIO 废弃（代码复杂，性能没有比NIO有明显提升）

## Reactor

**定义**

> 是一种开发模式；模式的核心流程是：注册感兴趣的时间-->扫描是否有感兴趣的事件发生-->事件发生后做相应的处理




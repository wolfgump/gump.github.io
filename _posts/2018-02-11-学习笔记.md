---
layout: post
title: "指针"
subtitle: '指针'
comments: false
author: "Gump"
header-style: text
date: 2018-02-10 20:30:21 +0800
tags:
  - C/C++
--- 

1.数组做函数参数，会退化为指针
2.sizeof(*p) 指针的大小 是指针变量占用内存的大小 
如：
int *p;
sizeof(*p)=sizeof(int)=4;
char a[10];
sizeof(*a)=sizeof(char)=1;
sizeof(a)=10;
*a代表数组a第一个元素的地址
3.形参中类型char a[10]的参数，会退化为指针
        证据：
        char a[10]={.....};
        sizeof(a)=10;
        void test(char a[10])
        {
            sizeof(a)=1;
        }
4.void*  是说: 这是一个指针,它指向的对象未知.
   void**  是说: 这是一个指针,它指向一个void* 型的数据结构.
5. 栈（临时内存空间）的生长方向向下，堆（全局内存空间，new malloc来申请得到）的生长方向向上
    char *p1="sda";
    char *p2="edfs";
    &p1>&p2;(p1,p2放在栈里)
    char *p3=(char *)malloc(10);
    char *p4=(char *)malloc(10);
6. 指针的数据类型是它所指向内存空间的类型，指针数据类型具有依赖性；结论：指针的步长根据其所指向的内存空间类型来定
7.指针的用途及最大意义
  场景1：在函数内 *p1++=*p2++;指针变量 操作
  场景2：指针做函数参数，通过*p形参改变实参的值，这才是指针的最大意义
用1级指针（通常是形参），修改0级指针（通常是实参）的值；
用2级指针（通常 是形参），修改1级指针（通常是实参）的值；
用3级指针（通常是形参），修改2级指针（通常是实参）的值；
用n级指针（通常是形参），修改n-1级指针（通常是实参）的值；
函数调用时，形参传给实参，用实参来取地址，传给形参；在被调用函数里用*p，来改变实参，把运算结果传出来
8.作为函数参数时的等价关系（数据作为函数参数会退化为指针：高效）
数组                                                指针
一维数组 char a[30]                        指针            char *a;
指针数组 char *a[30]                       指针的指针  char **a;  
二维数组 char[10][30]                     数组的指针  char (*a)[30]

如何区分指针数组和数组指针：char *a[30] []的优先级较高 所以a为数组名，指针类型的数组，即指针数组
                                                 char (*a)[30] ()[]的优先级相等，遵循由左到右的原则，所以 a是指针，指向数组，即数组指针


9.避免野指针的方法；
 第一步、初始化的时候初始化为NULL
    char *p=NULL;
    p=mallc(10);
第二步、释放的时候判断是否是NULL
 if(p!=NULL)
{
    free(p);
}
第三步、释放完毕在置成NUILL
p=NULL;
10.结构体变量四字节存放
typeof struct _Teacher
{
    char name[6];
    int age;
} Teacher
Teacher t;
sizeof(t)=12;//name 为6 ，其实一共分配了8 ，剩余两位不够int用，空了出来，所以8+4

typeof struct _Teacher
{
    char name[6];
    char age;
} Teacher
Teacher t;
sizeof(t)=7; //剩余两位够char用了
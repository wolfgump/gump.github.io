---
layout: post
title: "领域驱动设计DDD"
subtitle: ''
comments: false
author: "Gump"
header-style: text
date: 2020-3-20 20:30:21 +0800
tags:
    - 架构
    - 笔记
    - DDD

---





# DDD-领域驱动设计

## 核心概念

- 领域驱动

  领域驱动设计是一种思维方式，也是一组优先任务，它旨在加速那些必须处理复杂领域的软件项目的开发

-   模型

    - 概念：模型是被用来描绘人们所关注的现实或想法的某个方面。模型是一种简化。它是对现实的解释——把与解决问题密切相关的方面抽象出来，而忽略无关的细节。
    - 形式：并非某种特殊的图，而是这种图所要传达的思想。它绝不单单是领域专家头脑中的知识，而是对这类知识严格的组织且有选择的抽象。图可以表示和传达一种模型，同样，精心书写的代码或文字也能达到同样的目的。
    - 在领域驱动设计中的用：1)模型和设计的核心相互影响。2）模型是团队所有成员使用的通用语言的中枢。3）模型是浓缩的知识
    - 关键元素：名词、业务活动、规则、实体、值对象

- 统一语言-- 方便业务专家 开发工程共同；UML、 名词表、模型

- Entity

  >  [What kinds of behavior should I put on a domain entity?](https://stackoverflow.com/questions/7781573/ddd-what-kinds-of-behavior-should-i-put-on-a-domain-entity)
  >
  >  The domain should represent (in code) what the business is or does (in real life). Domain entities, then, are the artifacts or actors found in that real-life business. What kind of behavior do those rea-life artifacts and actors have? All of it. In turn, what kind of behavior SHOULD domain entities have on them? All of it.
  >
  >  For instance, in real life, a manager can hire a new employee. The domain's representation of that should include entities like "manager" and "new employee". The manager is the actor, here.
  >
  >  ```java
  >  //newEmployee comes from somewhere else... possibly the UI
  >  //someManagerId comes from the logged in user
  >  var manager = _repository.Get<Manager>(someManagerId);
  >  manager.Hire(newEmployee);
  >  ```

- ValueObject

- Repo

- Domain Event--the state of the business changes (a change that matters to business experts)

- Aggregate--bind *Entities* & *Value Objects* under the same root

- Domain Services-- business logic doesn’t belong to a given object

  doesn't naturally fit within a domain object

  Having CashTrasnfer use case, we have to:

  - load account 'from'
  - load account 'to'
  - check 'from' balance' //error could be returned
  - verify accounts access (locked, etc.)//error could be returned
  - withdraw 'amount' from 'from'
  - put the amount to 'to'

- Application Service 

  An application service is a class which serves as a [facade](http://en.wikipedia.org/wiki/Facade_pattern) encapsulating your domain and implements domain uses cases by orchestrating domain objects, repositories and other services

- 上下文界限

- CQRS

## 关键点

- 真正强大的领域模型是随着时间演进的，即使是最有经验的建模人员也往往发现他们是在系统的初始版本完成之后才有了最好的想法。
- 软件的核心是其为用户解决领域相关的问题的能力。

## 开始领域设计

### 1.消化知识







